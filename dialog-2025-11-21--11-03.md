## Me:

```
python3 -m pip install markdown
Collecting markdown
  Downloading markdown-3.10-py3-none-any.whl.metadata (5.1 kB)
Downloading markdown-3.10-py3-none-any.whl (107 kB)
Installing collected packages: markdown
Successfully installed markdown-3.10
((.venv) ) ➜  uav-nest-agent-by-langchain-and-langgraph (stage2-multi-source-rag) ✗)python3 uav-nest-agent-multi-source.py                             
```

## Output:

```
✅ Using FastEmbedEmbeddings (free local embedder)
============================================================
🤖 Multi-Source RAG Agent (LangChain Educational Demo)
============================================================

⚠️  This demo is designed to showcase LangChain's limitations
   in multi-source RAG scenarios.

🔧 Initializing Multi-Source RAG Agent...

🔑 请输入你的 DEEPSEEK_API_KEY
   获取地址: https://platform.deepseek.com/
   API Key (输入时会隐藏): 
✅ DEEPSEEK_API_KEY 已接收

🔧 Initializing FastEmbed embeddings (free, local)...
🔧 Initializing DeepSeek Reasoner model...

📚 Step 1: Loading data sources...

============================================================
📚 Loading All Data Sources
============================================================

[1/P1] EVO Nest技术白皮书
  📄 Loading EVO Nest技术白皮书 from evo-nest-data-storage-spec.md...
  ✅ Loaded 1 documents

[1/P1] DJI Dock技术白皮书
  📄 Loading DJI Dock技术白皮书 from dji-dock-data-storage-spec.md...
  ✅ Loaded 1 documents

[2/P2] EVO Nest用户手册
  📄 Loading EVO Nest用户手册 from EN_EVO-Nest-Kit-User-Manual_V1.0.1.pdf...
  ✅ Loaded 151 pages

[2/P2] DJI Dock用户手册
  📄 Loading DJI Dock用户手册 from M30_Series_Dock_Bundle_User_Manual_v1.8_CHS.pdf...
  ✅ Loaded 76 pages
  🔍 Filtering by keywords: 存储, 数据管理, 内存, SD, 数据传输, 备份, 容量
  ✅ Filtered to 18 relevant pages

[3/P3] EVO Nest官网介绍
  📄 Loading EVO Nest官网介绍 from evo-nest-official-webpage.md...
  ✅ Loaded 1 documents

[3/P3] DJI Dock官网介绍
  📄 Loading DJI Dock官网介绍 from dji-dock-official-webpage.md...
  ✅ Loaded 1 documents

============================================================
✅ Successfully loaded 6 data sources
============================================================

🗄️  Step 2: Creating vector stores...

============================================================
🗄️  Creating Vector Stores
============================================================

[P1] EVO Nest技术白皮书
  📊 Table: evo_nest_whitepaper
  ✂️  Splitting 1 documents into chunks...
  ✅ Created 6 chunks
  🔧 Creating vector store (this may take a moment)...
  ✅ Vector store created

[P1] DJI Dock技术白皮书
  📊 Table: dji_dock_whitepaper
  ✂️  Splitting 1 documents into chunks...
  ✅ Created 9 chunks
  🔧 Creating vector store (this may take a moment)...
  ✅ Vector store created

[P2] EVO Nest用户手册
  📊 Table: evo_nest_manual
  📂 Loading existing table (382 rows)

[P2] DJI Dock用户手册
  📊 Table: dji_dock_manual
  📂 Loading existing table (21 rows)

[P3] EVO Nest官网介绍
  📊 Table: evo_nest_webpage
  ✂️  Splitting 1 documents into chunks...
  ✅ Created 6 chunks
  🔧 Creating vector store (this may take a moment)...
  ✅ Vector store created

[P3] DJI Dock官网介绍
  📊 Table: dji_dock_webpage
  ✂️  Splitting 1 documents into chunks...
  ✅ Created 3 chunks
  🔧 Creating vector store (this may take a moment)...
  ✅ Vector store created

============================================================
✅ Successfully created 6 vector stores
============================================================

🔍 Step 3: Creating retrievers...

============================================================
🔍 Creating Retrievers
============================================================
  ✅ [P1] EVO Nest技术白皮书: retriever created (k=5)
  ✅ [P1] DJI Dock技术白皮书: retriever created (k=5)
  ✅ [P2] EVO Nest用户手册: retriever created (k=5)
  ✅ [P2] DJI Dock用户手册: retriever created (k=5)
  ✅ [P3] EVO Nest官网介绍: retriever created (k=5)
  ✅ [P3] DJI Dock官网介绍: retriever created (k=5)

============================================================
✅ Created 6 retrievers
   P1 (Whitepapers): 2 retrievers
   P2 (Manuals): 2 retrievers
   P3 (Webpages): 2 retrievers
============================================================

⚙️  Step 4: Setting up RAG chains...

✅ RAG chains configured (prompt template and output parser ready)

🚀 Step 5: Running strategy comparison...

============================================================
🎯 多源RAG策略对比实验
============================================================

问题：EVO Nest机巢的数据存储方案与DJI Dock机场有什么区别？


============================================================
策略1: 简单拼接
============================================================

────────────────────────────────────────────────────────────
📊 策略1: 简单拼接 (Simple Concatenation)
────────────────────────────────────────────────────────────

🔍 检索阶段：
/Users/binwu/OOR-local/katas/uav-nest-agent-by-langchain-and-langgraph/uav-nest-agent-multi-source.py:541: LangChainDeprecationWarning: The method `BaseRetriever.get_relevant_documents` was deprecated in langchain-core 0.1.46 and will be removed in 1.0. Use :meth:`~invoke` instead.
  docs = retriever.get_relevant_documents(query)
  ✅ P1 (技术白皮书): 10 chunks
     - DJI Dock技术白皮书: 5 chunks
     - EVO Nest技术白皮书: 5 chunks
  ✅ P2 (用户手册): 10 chunks
     - DJI Dock用户手册: 5 chunks
     - EVO Nest用户手册: 5 chunks
  ✅ P3 (官网介绍): 8 chunks
     - DJI Dock官网介绍: 3 chunks
     - EVO Nest官网介绍: 5 chunks
  📦 总计: 28 chunks

💬 生成答案中...
huggingface/tokenizers: The current process just got forked, after parallelism has already been used. Disabling parallelism to avoid deadlocks...
To disable this warning, you can either:
        - Avoid using `tokenizers` before the fork if possible
        - Explicitly set the environment variable TOKENIZERS_PARALLELISM=(true | false)
huggingface/tokenizers: The current process just got forked, after parallelism has already been used. Disabling parallelism to avoid deadlocks...
To disable this warning, you can either:
        - Avoid using `tokenizers` before the fork if possible
        - Explicitly set the environment variable TOKENIZERS_PARALLELISM=(true | false)

⏱️  耗时: 108.3秒

============================================================
策略3: RRF融合
============================================================

────────────────────────────────────────────────────────────
📊 策略3: RRF融合 (RRF Fusion)
────────────────────────────────────────────────────────────
⚠️  LangChain的EnsembleRetriever无法配置数据源优先级权重

🔍 检索阶段（使用LangChain的EnsembleRetriever）：
  ✅ 融合后返回: 28 chunks (LangChain自动去重和重排序)
  📊 数据源分布:
     - P1: 10 chunks
     - P2: 10 chunks
     - P3: 8 chunks

💬 生成答案中...

⏱️  耗时: 107.9秒

============================================================
策略4: 优先级过滤
============================================================

────────────────────────────────────────────────────────────
📊 策略4: 优先级过滤 (Priority Filtering)
────────────────────────────────────────────────────────────
⚠️  LangChain标准RAG链不支持条件分支逻辑
   需要完全自定义实现（阈值=8）

🔍 阶段1: 查询P1 (技术白皮书)...
   → 检索到 10 chunks
   ✅ 超过阈值 (8)，使用P1结果
   ⏭️  跳过P2和P3查询（P1结果已足够）

📦 最终使用: 10 chunks

💬 生成答案中...

⏱️  耗时: 105.8秒

============================================================
📈 策略对比总结
============================================================

────────────────────────────────────────────────────────────
【简单拼接】的回答：
────────────────────────────────────────────────────────────
### EVO Nest与DJI Dock数据存储方案对比分析

作为无人机产品对比分析专家，我将基于提供的产品文档（优先级：P1技术白皮书 > P2用户手册 > P3官网介绍）对EVO Nest和DJI Dock的数据存储方案进行结构化对比分析。以下是详细比较：

---

#### 1. EVO Nest数据存储方案特点
EVO Nest采用以本地存储为核心的架构，注重离线可用性和灵活性，支持边缘计算和数据长期缓存。关键特点包括：
- **存储硬件**：
  - 内置128GB eMMC 5.1闪存，读取速度最高250 MB/s，写入速度最高125 MB/s。
  - 存储分区设计：Cache分区80GB（用于无人机数据临时缓存），System分区20GB，Logs分区10GB，Config分区2GB，Reserved分区16GB（用于系统恢复）。
  - 预期寿命：100,000次擦写循环。[EVO Nest技术白皮书]

- **数据传输机制**：
  - 无人机到机巢：主要通过WiFi 6（802.11ax）传输，实际速度150-200 MB/s；备用方案为USB-C 3.1物理传输（最高10 Gbps）。
  - 机巢到云端：支持4G/5G/以太网，上传速度5-50 MB/s（视网络条件）。智能上传策略支持优先级分级（P0紧急任务实时传输，P3低优先级任务夜间上传）。[EVO Nest技术白皮书]

- **数据保留与管理**：
  - Cache分区数据保留24-72小时，网络中断时自动重试上传（每6小时一次，最多72小时）。
  - 支持离线导出：通过以太网连接Web管理界面（IP: 192.168.1.100）手动下载数据。
  - 可自定义保留策略（如时长、上传优先级）。[EVO Nest技术白皮书]

- **安全与加密**：
  - 传输加密：TLS 1.3（机巢↔云端）。
  - 本地加密：dm-crypt全盘加密（Cache分区），密钥由TPM 2.0硬件管理。
  - 访问控制：OAuth 2.0 + 多因素认证，基于角色的权限管理。[EVO Nest技术白皮书]

- **性能指标**：
  - 单日最大处理量：500GB。
  - 典型场景：30分钟巡检任务（5GB数据）从无人机到机巢传输需30秒，总上传时间8-40分钟。
  - 支持离线运行数天，无强制云端订阅。[EVO Nest技术白皮书]

---

#### 2. DJI Dock数据存储方案特点
DJI Dock采用“强云端”架构，强调数据集中管理和实时上传，本地存储仅作为临时缓冲。关键特点包括：
- **存储硬件**：
  - 内置256GB NVMe SSD，耐用度3000 TBW（在每天300GB写入场景下，寿命超25年）。
  - 存储分区设计：Buffer分区最大可用180GB（总256GB，其余为系统预留），用于临时缓存。[DJI Dock技术白皮书]

- **数据传输机制**：
  - 无人机到Dock：通过O3高速传输（Dock 2版本速度100 MB/s）。
  - Dock到云端：强制连接到FlightHub 2云平台，支持4G/5G/以太网（上传速度受网络限制，以太网最高120 MB/s）。
  - 无本地Web界面，仅通过FlightHub 2远程管理。[DJI Dock技术白皮书]

- **数据保留与管理**：
  - 强制删除规则：数据上传到云端后立即自动删除；本地Buffer分区保留时间通常<6小时，上传失败的文件最多保留48小时（超时强制删除）。
  - 不支持传统本地数据恢复：一旦数据从Dock删除且未上传成功，将永久丢失；唯一恢复途径是从FlightHub 2或无人机SD卡读取。
  - 用户可配置性有限（仅删除策略），必须订阅FlightHub 2（费用按设备和存储容量计费）。[DJI Dock技术白皮书]

- **安全与加密**：
  - 传输加密：O3传输使用DJI私有协议 + AES-128；云端传输为TLS 1.3。
  - 静态加密：FlightHub 2云端使用AES-256，但本地Buffer分区未加密（临时性质）。
  - 访问控制：仅通过FlightHub 2管理，支持多因素认证和基于组织的权限。[DJI Dock技术白皮书]

- **性能指标**：
  - 单日最大处理量：300GB（受网络上传速度限制）。
  - 典型场景：25分钟巡检任务（8GB数据）从无人机到Dock传输需2分钟，总上传时间5-15分钟。
  - 依赖网络连接，离线场景受限。[DJI Dock技术白皮书]

---

#### 3. 关键差异总结
| 特性 | EVO Nest | DJI Dock |
|------|----------|----------|
| **存储策略** | 本地存储为主，Cache分区长期缓存（24-72小时） | 云端存储为主，本地仅临时缓冲（<6小时） |
| **存储容量** | 128GB eMMC（Cache分区80GB） | 256GB SSD（Buffer分区180GB） |
| **离线可用性** | ✅ 支持离线运行数天，可手动导出数据 | ❌ 必须连接云端，离线场景受限 |
| **数据恢复** | ✅ 支持多方式恢复（本地、云端、SD卡） | ❌ 仅从云端或SD卡恢复，本地数据删除后永久丢失 |
| **加密安全** | ✅ 全盘加密（本地和传输） | ⚠️ 本地Buffer未加密，仅云端加密 |
| **订阅模型** | ✅ 无强制订阅费用 | ❌ 必须购买FlightHub 2订阅（额外成本） |
| **用户配置** | ✅ 高度可配置（保留策略、优先级） | ⚠️ 有限配置（仅删除策略） |
| **适用场景** | 偏远地区、离线作业、数据主权要求高 | 团队协作、网络条件好、集中管理需求 |

**核心差异**：  
- EVO Nest注重**灵活性和离线韧性**，适合网络不稳定或数据需本地保留的场景。  
- DJI Dock强调**云端集成和团队协作**，适合有稳定网络且需集中管理的企业环境，但依赖订阅和网络连接。[DJI Dock技术白皮书, 8.2数据流转对比]

---

#### 4. 引用来源
- [EVO Nest技术白皮书]：存储架构、分区设计、传输机制、加密细节、性能指标（章节1.2, 2.1, 3.1, 3.2, 7.1, 9.1）。
- [DJI Dock技术白皮书]：存储硬件、Buffer分区、强制删除策略、加密对比、订阅要求（章节6.1, 8.1, 9.2, 10.1, 12.1）。
- 注：P2用户手册和P3官网介绍未提供核心存储方案细节，因此本分析主要基于P1技术白皮书。

此对比基于文档最新版本（EVO Nest v3.0, DJI Dock v2.1），实际表现可能因环境、配置和固件版本而异。建议根据具体部署需求选择方案。

⏱️  生成耗时: 108.3秒
📦 使用chunks数: 28个

────────────────────────────────────────────────────────────
【RRF融合】的回答：
────────────────────────────────────────────────────────────
### EVO Nest与DJI Dock数据存储方案对比分析

基于提供的产品文档（优先级：P1技术白皮书 > P2用户手册 > P3官网介绍），以下是对EVO Nest和DJI Dock数据存储方案的结构化对比分析。分析重点聚焦于技术规格、数据流转策略、安全性和故障处理等方面，并引用具体数据来源。

---

#### 1. EVO Nest数据存储方案特点
EVO Nest采用“本地为主、云端为辅”的架构，注重离线场景的可用性和数据安全性。关键特点包括：
- **存储硬件配置**：
  - 内置128GB eMMC 5.1高速闪存，读取速度最高250 MB/s，写入速度最高125 MB/s，预期寿命100,000次擦写循环。
  - 存储分区设计：Cache分区80GB（主要数据缓存）、System分区20GB（系统固件）、Logs分区10GB（日志）、Config分区2GB（配置）、Reserved分区16GB（紧急恢复）。  
  *来源：[EVO Nest技术白皮书, 1.2 存储硬件配置]*

- **数据传输机制**：
  - **无人机到机巢**：通过WiFi 6（802.11ax）无线传输，实际速度150-200 MB/s；备用方案为USB-C 3.1物理传输（速度最高1.2 GB/s），在WiFi失败时自动降级。  
  *来源：[EVO Nest技术白皮书, 3.1 数据传输机制]*
  - **机巢到云端**：支持4G/5G/以太网上传，速度5-50 MB/s（取决于网络）。智能上传策略支持优先级分级（P0紧急任务实时传输至P3低峰时段上传）。  
  *来源：[EVO Nest技术白皮书, 3.2 机巢到云端的传输]*

- **数据保留与清理**：
  - Cache分区数据保留24-72小时，网络中断时自动延长保留时间，恢复后重传。支持手动导出数据（通过Web管理界面IP: 192.168.1.100）。  
  *来源：[EVO Nest技术白皮书, FAQ Q2、Q3]*
  - 自动清理策略：触发删除已上传数据，存储空间不足时暂停新任务。  
  *来源：[EVO Nest技术白皮书, 8.1.3 存储空间不足]*

- **安全与加密**：
  - 全盘加密（dm-crypt），传输使用TLS 1.3，密钥管理基于TPM 2.0硬件安全模块。  
  *来源：[EVO Nest技术白皮书, 9.1 数据加密]*
  - 符合GDPR、PIPL等隐私法规，支持数据存储地区选择。  
  *来源：[EVO Nest技术白皮书, 9.3 合规认证]*

- **数据恢复能力**：
  - 支持多路径恢复：本地（Reserved分区）、云端（AthenaOS平台）、无人机SD卡（机巢故障时）。  
  *来源：[EVO Nest技术白皮书, 8.2 数据恢复]*

---

#### 2. DJI Dock数据存储方案特点
DJI Dock采用“强云端”架构，数据集中管理于FlightHub 2平台，强调团队协作但依赖网络连接。关键特点包括：
- **存储硬件配置**：
  - 内置256GB NVMe SSD（高耐用度，3000 TBW写入寿命），在典型使用场景下（每天300GB写入）预期寿命超过25年。  
  *来源：[DJI Dock技术白皮书, Q5]*
  - Buffer分区最大可用180GB（总256GB中扣除系统预留），用于临时缓存数据。  
  *来源：[DJI Dock技术白皮书, 7.2 系统容量]*

- **数据传输机制**：
  - **无人机到Dock**：通过O3高速传输（Dock 2速度提升至100 MB/s），失败时降级到物理接口或保留数据在无人机SD卡。  
  *来源：[DJI Dock技术白皮书, 9.1.1 O3传输失败]*
  - **Dock到云端**：必须通过FlightHub 2平台，上传速度依赖网络（4G/5G/以太网）。支持智能压缩功能（可选），节省流量40-60%。  
  *来源：[DJI Dock技术白皮书, 12.1 智能压缩]*

- **数据保留与清理**：
  - 强制删除规则：数据上传到FlightHub 2后立即自动删除；Buffer分区保留时间通常<6小时，上传失败的文件最多保留48小时（超时后强制删除）。  
  *来源：[DJI Dock技术白皮书, 4.1 本地数据保留策略]*
  - 无本地Web界面，仅通过FlightHub 2远程管理，不支持纯本地存储模式。  
  *来源：[DJI Dock技术白皮书, 10.2 访问控制]*

- **安全与加密**：
  - O3传输使用DJI私有协议+AES-128加密，云端传输使用TLS 1.3，静态存储（FlightHub 2）使用AES-256。但本地Buffer分区未加密。  
  *来源：[DJI Dock技术白皮书, 10.1 数据加密]*
  - 支持多因素认证和基于组织的权限管理，符合GDPR、ISO 27001等标准。  
  *来源：[DJI Dock技术白皮书, 10.3 合规认证]*

- **数据恢复能力**：
  - **不支持本地数据恢复**：一旦数据从Dock删除且未上传成功，数据永久丢失。唯一恢复途径为FlightHub 2云平台或无人机SD卡。  
  *来源：[DJI Dock技术白皮书, 9.2 数据恢复]*

---

#### 3. 关键差异总结
| 对比维度 | EVO Nest | DJI Dock |
|----------|----------|----------|
| **存储容量** | 128GB eMMC（Cache分区80GB） | 256GB NVMe SSD（Buffer分区180GB） |
| **数据保留策略** | 本地保留24-72小时，离线友好 | 强制云端，本地保留<6小时，依赖网络 |
| **架构理念** | 本地为主，支持离线运行数天 | 强云端，数据集中管理，团队协作方便 |
| **数据加密** | 全盘加密（本地和传输） | 本地Buffer分区未加密，云端加密完整 |
| **数据恢复** | 支持本地、云端、SD卡多路径恢复 | 仅云端或SD卡，无本地恢复能力 |
| **订阅模式** | 无强制订阅费用，可选云服务 | 必须订阅FlightHub 2（额外成本） |
| **故障处理** | 自动降级传输（USB-C），延长保留时间 | 依赖云端重试，强制删除超时数据 |
| **适用场景** | 偏远地区、离线作业、数据主权要求高 | 网络条件好、团队分布式作业 |

- **核心差异**：  
  - EVO Nest注重**数据本地控制和离线可用性**，适合网络不稳定或数据隐私要求高的场景（如偏远巡检、紧急搜救）。  
  - DJI Dock强调**云端协同和集中管理**，适合网络稳定、需团队协作的企业环境，但需承担订阅成本且离线场景受限。  
  *来源综合：[DJI Dock技术白皮书, 8.2 数据流转对比]、[EVO Nest技术白皮书, FAQ Q2]*

---

#### 4. 引用来源标注
- [EVO Nest技术白皮书]：包括1.2存储硬件配置、3.1数据传输机制、FAQ Q2/Q3、8.1.3存储空间不足、9.1数据加密、8.2数据恢复等章节。
- [DJI Dock技术白皮书]：包括Q5存储硬件、4.1本地数据保留策略、9.1.1 O3传输失败、10.1数据加密、9.2数据恢复、12.1智能压缩、8.2数据流转对比等章节。

所有引用均基于P1技术白皮书（最高优先级），确保信息权威性。P2用户手册和P3官网介绍作为补充，未发现与P1冲突的信息，但未直接用于本对比的核心数据点。

⏱️  生成耗时: 107.9秒
📦 使用chunks数: 28个

────────────────────────────────────────────────────────────
【优先级过滤】的回答：
────────────────────────────────────────────────────────────
以下是根据提供的产品文档（优先级以P1技术白皮书为主）对EVO Nest和DJI Dock数据存储方案的结构化对比分析。分析基于文档中的具体技术规格和设计理念，引用来源均标注自P1技术白皮书部分（文档未分页，故使用章节号或关键描述作为引用）。

---

### 1. EVO Nest数据存储方案特点
EVO Nest采用"本地为主、云端协同"的架构，强调离线可用性和灵活的数据管理。以下是其核心特点（引用自[EVO Nest技术白皮书]）：
- **存储硬件配置**：
  - 内置128GB eMMC 5.1闪存，分区设计包括：System（20GB）、Cache（80GB，主要数据存储）、Logs（10GB）、Config（2GB）和Reserved（16GB）。读取速度最高250 MB/s，写入速度最高125 MB/s，预期寿命100,000次擦写循环。[EVO Nest技术白皮书, 1.2 存储硬件配置]
- **数据传输机制**：
  - 无人机到机巢：主要通过WiFi 6（802.11ax）传输，实际速度150-200 MB/s；备用方案为USB-C 3.1接口（最高10 Gbps），在WiFi失败时自动降级。[EVO Nest技术白皮书, 3.1 无人机到机巢的传输]
  - 机巢到云端：支持4G/5G/以太网，上传速度5-50 MB/s（取决于网络）。智能上传策略允许优先级分级（如紧急任务实时传输，常规任务排队上传）。[EVO Nest技术白皮书, 3.2 机巢到云端的传输]
- **数据保留与离线支持**：
  - Cache分区数据保留24-72小时，网络中断时数据不会丢失，最多保留72小时并自动重试上传。支持通过Web管理界面（IP: 192.168.1.100）手动离线导出数据。[EVO Nest技术白皮书, 2.2 数据流转流程] 和 [EVO Nest技术白皮书, FAQ Q2-Q3]
- **安全与加密**：
  - 全盘加密（dm-crypt）用于本地存储，传输使用TLS 1.3加密，密钥管理通过TPM 2.0硬件模块。[EVO Nest技术白皮书, 9.1 数据加密]
- **性能指标**：
  - 典型30分钟巡检任务（5GB数据）：传输到机巢约30秒，上传到云端8-40分钟，总时长10-45分钟。单日最大处理量500GB，Cache分区可存储约16次30分钟任务数据。[EVO Nest技术白皮书, 7.1 典型场景性能] 和 [EVO Nest技术白皮书, FAQ Q1]

**设计理念**：注重边缘计算和离线场景，用户可自定义数据保留策略，无强制云端订阅费用。

---

### 2. DJI Dock数据存储方案特点
DJI Dock采用"强云端"架构，数据集中管理于FlightHub 2平台，本地存储仅作为临时缓冲。以下是其核心特点（引用自[DJI Dock技术白皮书]）：
- **存储硬件配置**：
  - 内置256GB NVMe SSD（Dock 2版本），耐用度3000 TBW（在每天300GB写入场景下，预计寿命超25年）。Buffer分区最大可用180GB（系统预留部分空间）。[DJI Dock技术白皮书, 1.2 存储硬件配置] 和 [DJI Dock技术白皮书, FAQ Q5]
- **数据传输机制**：
  - 无人机到Dock：通过O3传输协议（私有协议），速度提升至100 MB/s（Dock 2版本）；备用方案为USB 2.0接口。[DJI Dock技术白皮书, 3.1 O3高速传输] 和 [DJI Dock技术白皮书, 9.1.1 O3传输失败]
  - Dock到云端：强制连接到FlightHub 2云平台，支持4G/5G/以太网，上传速度受网络限制（如以太网最高120 MB/s）。实时上传低分辨率预览，任务完成后优先上传完整文件。[DJI Dock技术白皮书, 3.2.2 DJI FlightHub 2集成]
- **数据保留与离线支持**：
  - 强制删除规则：数据上传到云端后立即删除本地副本；Buffer分区保留时间通常<6小时，上传失败的文件最多保留48小时，超时后强制删除。不支持传统本地数据恢复，无本地Web界面，必须通过FlightHub 2管理。[DJI Dock技术白皮书, 4.1 本地数据保留策略] 和 [DJI Dock技术白皮书, 9.2 数据恢复]
- **安全与加密**：
  - O3传输使用DJI私有协议+AES-128加密，云端传输为TLS 1.3，静态存储为AES-256，但本地Buffer分区未加密。[DJI Dock技术白皮书, 10.1 数据加密]
- **性能与订阅要求**：
  - 典型25分钟巡检任务（8GB数据）：无人机到Dock约2分钟，Dock到云端5-15分钟，总时长7-17分钟。必须购买FlightHub 2订阅（例如Basic计划$1,200/年），云存储容量默认6个月（可配置）。[DJI Dock技术白皮书, 7.1 典型场景性能] 和 [DJI Dock技术白皮书, 6.2 FlightHub 2订阅计划]

**设计理念**：数据管道模式，强调团队协作和云端集中管理，但依赖网络连接和订阅服务。

---

### 3. 关键差异总结
基于技术白皮书，EVO Nest和DJI Dock在数据存储方案上的主要差异如下：
- **存储容量与硬件**：DJI Dock提供更大容量的SSD（256GB vs. 128GB）和更高耐用性，但EVO Nest的eMMC分区设计更灵活（如Cache分区占80GB）。[EVO Nest技术白皮书, 1.2] vs. [DJI Dock技术白皮书, 1.2]
- **数据保留策略**：EVO Nest允许本地数据保留24-72小时，支持离线导出；DJI Dock强制删除本地数据（保留<6小时），离线场景受限。[EVO Nest技术白皮书, 2.2] vs. [DJI Dock技术白皮书, 4.1]
- **架构理念**：EVO Nest为"本地为主"架构，边缘计算能力强，适合偏远地区；DJI Dock为"强云端"架构，依赖FlightHub 2，适合团队协作。[EVO Nest技术白皮书, 边缘计算能力增强] vs. [DJI Dock技术白皮书, 8.2 数据流转对比]
- **加密与安全**：EVO Nest实现全盘加密；DJI Dock本地Buffer分区未加密，但云端安全标准高。[EVO Nest技术白皮书, 9.1] vs. [DJI Dock技术白皮书, 10.1]
- **成本与订阅**：EVO Nest无强制订阅费用；DJI Dock必须购买FlightHub 2订阅，增加长期成本。[DJI Dock技术白皮书, 6.2 FlightHub 2订阅计划]
- **故障恢复**：EVO Nest支持多路径恢复（本地、SD卡、云端）；DJI Dock数据恢复依赖云端，本地删除后永久丢失。[EVO Nest技术白皮书, 8.2 数据恢复] vs. [DJI Dock技术白皮书, 9.2 数据恢复]

---

### 4. 引用来源标注
- **EVO Nest引用**：全部基于[EVO Nest技术白皮书]，具体章节包括：1.2存储硬件配置、2.2数据流转流程、3.1数据传输机制、7.1性能指标、9.1安全加密、FAQ等。
- **DJI Dock引用**：全部基于[DJI Dock技术白皮书]，具体章节包括：1.2存储硬件配置、3.1 O3传输、4.1数据保留策略、7.1性能指标、9.2数据恢复、10.1加密、FAQ等。

此对比分析基于最高优先级的P1技术白皮书，确保信息权威性。建议在实际部署中结合网络环境和业务需求（如离线作业频率、团队协作要求）选择方案。

⏱️  生成耗时: 105.8秒
📦 使用chunks数: 10个

============================================================
📊 策略对比指标
============================================================

指标                   策略1             策略3             策略4            
──────────────────────────────────────────────────────────────────────
检索chunks数            28              28              10             
高优先级chunks           10/28 (36%)     10/28 (36%)     10/10 (100%)   
生成耗时(秒)              108.3           107.9           105.8          

============================================================
⚠️  LangChain在多源RAG场景下的局限性
============================================================
1. ❌ 需要手动管理多个检索器，缺乏统一的管理接口
   - 必须分别创建6个vector store和6个retriever
   - 没有DataSourceManager或类似的统一抽象

2. ❌ EnsembleRetriever无法配置数据源优先级权重
   - 所有数据源被平等对待
   - 无法体现"技术白皮书>用户手册>官网"的质量差异

3. ❌ 无法实现条件查询逻辑（如"先查A，不够再查B"）
   - 标准RAG Chain不支持条件分支
   - 策略4需要完全自定义实现100+行代码
   - 无法使用LangChain的Chain抽象

4. ❌ 缺乏查询路由功能
   - 无法根据问题类型自动选择数据源
   - 不能实现"技术问题→白皮书，操作问题→手册"

5. ❌ 多检索器的日志输出混乱，难以追踪
   - 需要手动添加大量print语句才能看清过程
   - 没有内置的可观测性工具

============================================================
💡 这些问题正是LangGraph要解决的！
============================================================

LangGraph提供：
  ✅ 图结构的工作流编排（支持条件分支、循环）
  ✅ 状态管理和条件路由
  ✅ 多Agent协作能力
  ✅ 内置的可观测性和调试工具

下一步可以探索使用LangGraph重构多源RAG系统。
============================================================

============================================================
✨ 演示完成！
============================================================

💡 下一步建议:
   1. 查看输出中的LangChain局限性标注
   2. 对比3种策略的答案质量差异
   3. 探索使用LangGraph重构多源RAG系统
```