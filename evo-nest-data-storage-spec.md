# Autel EVO Nest 机巢数据存储方案技术白皮书

**文档版本**: v3.0  
**发布日期**: 2023年10月  
**产品型号**: EVO Nest (for Autel EVO II series)  
**适用固件版本**: ≥ v2.5.0  

---

## 1. 系统架构概述

### 1.1 核心处理单元

- **处理器**: 8核ARM架构处理器
- **主频**: 2.0 GHz
- **内存**: 8GB LPDDR4X RAM
- **操作系统**: Linux-based Autel Nest OS v3.0

### 1.2 存储硬件配置

- **内置存储**: 128GB eMMC 5.1高速闪存
- **读取速度**: 最高250 MB/s
- **写入速度**: 最高125 MB/s
- **预期寿命**: 100,000次擦写循环
- **文件系统**: ext4 (Linux native)

---

## 2. 数据存储架构

### 2.1 存储分区设计

128GB内置存储按以下方式分配：

| 分区名称 | 容量 | 用途 | 说明 |
|---------|------|------|------|
| System | 20GB | 系统固件和核心服务 | 只读分区，OTA升级时才写入 |
| Cache | 80GB | 无人机数据临时缓存 | 主要数据存储区域 |
| Logs | 10GB | 系统日志和诊断数据 | 循环写入，保留最近30天 |
| Config | 2GB | 配置文件和用户设置 | 持久化配置信息 |
| Reserved | 16GB | 系统保留空间 | 用于固件升级和紧急恢复 |

### 2.2 数据流转流程

```
无人机microSD卡 
    ↓ (WiFi 6传输, 150-200 MB/s)
EVO Nest内置存储 (Cache分区, 80GB)
    ↓ (4G/5G网络, 5-50 MB/s)
Autel AthenaOS云服务器
    ↓ (自动清理策略)
EVO Nest本地数据删除 (保留24-72小时)
```

---

## 3. 数据传输机制

### 3.1 无人机到机巢的传输

#### 3.1.1 WiFi 6无线传输（主要方式）

- **传输协议**: WiFi 6 (802.11ax)
- **频段**: 5 GHz
- **理论带宽**: 1200 Mbps
- **实际传输速度**: 150-200 MB/s
- **传输方式**: 无人机降落后自动建立连接
- **加密**: WPA3-Enterprise + AES-256

**传输流程**:
1. 无人机降落到机巢充电坞
2. 机巢检测到无人机（通过物理触点）
3. 机巢发出WiFi SSID广播（NEST-XXXXXXXX）
4. 无人机自动连接WiFi（预配置凭证）
5. 建立SFTP连接，开始文件传输
6. 传输完成后，无人机标记数据为"已备份"
7. 下次任务前，无人机可选择删除已备份数据

#### 3.1.2 物理备用方案（USB-C接口）

- **接口类型**: USB-C 3.1 Gen 2
- **传输速度**: 最高10 Gbps (约1.2 GB/s)
- **使用场景**: WiFi传输失败时的降级方案
- **触发条件**: 
  - WiFi连接超时（>5分钟）
  - WiFi传输中断3次以上
  - 用户手动指定USB传输模式

### 3.2 机巢到云端的传输

#### 3.2.1 网络连接方式

**4G LTE支持**:
- 支持频段: B1/B3/B5/B8/B38/B39/B40/B41
- 上传速度: 5-20 MB/s (取决于信号强度)
- 推荐使用场景: 偏远地区、临时部署点

**5G NR支持** (v3.0新增):
- 支持频段: n1/n3/n41/n78/n79
- 上传速度: 20-50 MB/s
- 推荐使用场景: 城市、有5G覆盖的固定站点

**以太网支持**:
- 接口: RJ45 千兆以太网
- 上传速度: 最高100 MB/s
- 推荐使用场景: 固定站点、有网络基础设施的区域

#### 3.2.2 智能上传策略

**优先级分级** (v2.5引入):

| 优先级 | 任务类型 | 上传策略 | 带宽分配 |
|-------|---------|---------|---------|
| P0 | 紧急任务（搜救、火灾） | 实时传输关键帧 | 100% |
| P1 | 高优先级巡检 | 任务结束后立即上传 | 80% |
| P2 | 常规巡检 | 排队上传 | 50% |
| P3 | 测绘、建模 | 夜间或低峰时段上传 | 30% |

**智能压缩**:
- 照片: 自动转码为JPEG (质量85-95可配置)
- 视频: 可选H.265压缩 (比特率可配置)
- 原始数据: RAW格式可选择性上传（默认不上传）

---

## 4. 数据管理策略

### 4.1 本地数据保留策略

#### 4.1.1 标准保留规则

- **已上传数据**: 保留24小时后自动删除
- **上传失败数据**: 保留72小时，每6小时重试一次
- **关键任务数据**: 保留7天（可配置）
- **存储空间告警**: 当Cache分区使用率>90%时触发告警

#### 4.1.2 自动清理机制

清理优先级（存储空间不足时）:
1. 已成功上传且超过24小时的数据
2. 已标记为"低优先级"的任务数据
3. 系统自动备份的缩略图和预览文件
4. 临时文件和处理中间产物

### 4.2 数据完整性保护

#### 4.2.1 校验机制

- **传输校验**: MD5哈希值验证
- **存储校验**: 每6小时对Cache分区进行完整性扫描
- **上传校验**: 云端返回SHA-256哈希值，机巢验证一致后才删除本地副本

#### 4.2.2 冗余机制

- **传输冗余**: 上传失败自动重试（最多5次）
- **存储冗余**: 关键配置文件实时同步到Config分区和Reserved分区
- **网络冗余**: 4G/5G/以太网自动切换

---

## 5. 支持的无人机数据格式

### 5.1 照片格式

| 格式 | 支持情况 | 说明 |
|-----|---------|------|
| JPEG | ✅ | 标准输出格式 |
| DNG (RAW) | ✅ | 专业摄影模式 |
| TIFF | ❌ | 不支持 |

### 5.2 视频格式

| 格式 | 支持情况 | 最高分辨率 | 码率 |
|-----|---------|-----------|------|
| MP4 (H.264) | ✅ | 8K 30fps | 120 Mbps |
| MP4 (H.265) | ✅ | 8K 60fps | 200 Mbps |
| MOV | ✅ | 4K 60fps | 100 Mbps |

### 5.3 飞行数据

- **飞行日志**: .dat格式，包含GPS、IMU、姿态数据
- **遥测数据**: .csv格式，实时记录传感器读数
- **任务文件**: .json格式，包含航点、参数配置

---

## 6. 云端存储集成

### 6.1 Autel AthenaOS平台

- **存储位置**: AWS S3 (美国) / 阿里云OSS (中国)
- **数据加密**: AES-256 (传输) + AES-256 (静态存储)
- **数据备份**: 三副本存储
- **数据保留**: 默认180天，可配置1年或永久保留

### 6.2 数据访问方式

- **Web端**: https://athenaos.autelrobotics.com
- **移动端**: Autel Sky App (iOS/Android)
- **API**: RESTful API + WebSocket实时推送

---

## 7. 性能指标

### 7.1 典型场景性能

| 场景 | 数据量 | 传输到机巢 | 上传到云端 | 总时长 |
|-----|-------|-----------|-----------|--------|
| 30分钟巡检任务 | 5GB照片+视频 | 30秒 (WiFi) | 8-40分钟 (视网络) | ~10-45分钟 |
| 2小时测绘任务 | 50GB照片 | 5分钟 (WiFi) | 2-8小时 (视网络) | 2-8小时 |
| 紧急搜救任务 | 2GB关键数据 | 10秒 (WiFi) | 实时传输 | <1分钟 |

### 7.2 系统容量

- **最大并发任务**: 4个无人机（轮流降落传输）
- **单日最大处理量**: 500GB
- **Cache分区循环周期**: 24-72小时

---

## 8. 故障处理与恢复

### 8.1 常见故障场景

#### 8.1.1 WiFi传输失败

**原因**:
- 无人机WiFi模块故障
- 机巢WiFi模块故障
- 环境电磁干扰

**处理**:
1. 自动降级到USB-C物理传输
2. 如果USB也失败，保留数据在无人机SD卡
3. 记录故障日志，推送告警到用户

#### 8.1.2 云端上传失败

**原因**:
- 网络连接中断
- 云端服务维护
- 认证令牌过期

**处理**:
1. 数据保留在Cache分区（延长至72小时）
2. 每6小时自动重试
3. 如果3天后仍失败，推送告警并询问用户是否手动导出

#### 8.1.3 存储空间不足

**处理**:
1. 触发自动清理（删除已上传数据）
2. 如果仍不足，暂停新任务
3. 推送告警，建议用户检查上传进度或手动导出数据

### 8.2 数据恢复

- **本地恢复**: 支持从Reserved分区恢复系统配置
- **云端恢复**: 支持从AthenaOS平台重新下载任务数据
- **SD卡恢复**: 如果数据未上传且机巢故障，可直接从无人机SD卡读取

---

## 9. 安全与合规

### 9.1 数据加密

- **传输加密**: TLS 1.3 (机巢↔云端)
- **本地加密**: dm-crypt全盘加密 (Cache分区)
- **密钥管理**: TPM 2.0硬件安全模块

### 9.2 访问控制

- **用户认证**: OAuth 2.0 + 多因素认证
- **权限管理**: 基于角色的访问控制（RBAC）
- **审计日志**: 所有数据访问操作记录并上传云端

### 9.3 合规认证

- **数据隐私**: 符合GDPR (欧盟) / PIPL (中国)
- **数据主权**: 支持选择数据存储地区
- **行业标准**: ISO 27001信息安全管理

---

## 10. 版本演进历史

### v1.0 (2021 Q2) - 基础本地存储
- 基础eMMC存储 (64GB)
- 仅支持WiFi传输
- 手动上传到云端

### v1.5 (2021 Q4) - 无线传输优化
- WiFi 6升级
- 传输速度从50MB/s提升到150MB/s
- 增加4G自动上传

### v2.0 (2022 Q2) - 存储扩容
- eMMC容量升级到128GB
- 增加USB-C备用传输
- 引入Cache分区设计

### v2.5 (2022 Q4) - 智能上传策略
- 优先级分级系统
- 5G网络支持
- 智能压缩和选择性上传

### v3.0 (2023 Q3) - 当前版本
- 8核处理器升级
- 边缘计算能力增强
- 本地AI预处理（关键帧提取）

---

## 11. 常见问题 (FAQ)

**Q1: 机巢能存储多少次飞行任务的数据？**  
A: 取决于任务类型。一般30分钟巡检任务（5GB数据）可以存储约16次；如果启用自动上传，实际上限更高。

**Q2: 如果网络中断，数据会丢失吗？**  
A: 不会。数据会保留在机巢的Cache分区（最多72小时），并在网络恢复后自动上传。

**Q3: 支持离线导出数据吗？**  
A: 支持。可以通过以太网连接到机巢的Web管理界面（IP: 192.168.1.100），手动下载数据。

**Q4: 数据传输是否加密？**  
A: 是的。所有传输都使用TLS 1.3加密，本地存储也启用了全盘加密。

**Q5: 可以自定义数据保留策略吗？**  
A: 可以。在AthenaOS管理后台可以配置保留时长、上传优先级等参数。

---

## 12. 技术支持

- **官方文档**: https://www.autelrobotics.com/support/evo-nest
- **技术支持邮箱**: support@autelrobotics.com
- **电话**: +1-855-285-3687 (美国) / 400-8863-400 (中国)

---

**文档修订历史**:
- v3.0 (2023-10): 增加边缘计算章节，更新性能指标
- v2.5 (2022-12): 增加智能上传策略说明
- v2.0 (2022-06): 重构存储架构描述
- v1.0 (2021-05): 初始版本

