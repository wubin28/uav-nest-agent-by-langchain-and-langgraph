# Employee Handbook Agent - C4 ç»„ä»¶å›¾æ¶æ„è§£æ

> æœ¬æ–‡æ¡£è¯¦ç»†è§£é‡Š `c4-model-component-2025-11-19--12-02.puml` ä¸­å„ä¸ªç»„ä»¶åŠå…¶è°ƒç”¨å…³ç³»

---

## ğŸ“Š ä¸€ã€ä¸šåŠ¡ç›®æ ‡

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ª**åŸºäº RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„å‘˜å·¥æ‰‹å†Œé—®ç­”ç³»ç»Ÿ**ï¼Œæ ¸å¿ƒä¸šåŠ¡ç›®æ ‡æ˜¯ï¼š

**ä» "jd-employee-handbook.pdf" æ–‡ä»¶ä¸­æ£€ç´¢ç›¸å…³å†…å®¹ï¼Œå‡†ç¡®å›ç­”ç”¨æˆ·æå‡ºçš„é—®é¢˜ï¼Œä¾‹å¦‚"å…¬å¸çš„å¹´å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ"**

### æŠ€æœ¯å®ç°è·¯å¾„

è¯¥ç³»ç»Ÿé€šè¿‡ä»¥ä¸‹æŠ€æœ¯å®ç°æ™ºèƒ½é—®ç­”ï¼š
- ğŸ“„ **æ–‡æ¡£å¤„ç†**ï¼šå°† PDF æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡æ•°æ®åº“ä»¥ä¾¿å¿«é€Ÿæ£€ç´¢
- ğŸ” **è¯­ä¹‰æœç´¢**ï¼šä½¿ç”¨å‘é‡ç›¸ä¼¼åº¦æ‰¾åˆ°ä¸é—®é¢˜æœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µ
- ğŸ¤– **æ™ºèƒ½ç”Ÿæˆ**ï¼šå°†æ£€ç´¢åˆ°çš„å†…å®¹å’Œç”¨æˆ·é—®é¢˜ä¸€èµ·å‘é€ç»™ LLMï¼Œç”Ÿæˆå‡†ç¡®çš„ç­”æ¡ˆ

---

## ğŸ”„ äºŒã€ç»„ä»¶ååŒå·¥ä½œæµç¨‹è¯¦è§£

æŒ‰ç…§å›¾ä¸­çš„æ‰§è¡Œåºå·ï¼ˆ1-17ï¼‰ï¼Œè®©æˆ‘ä»¬é€æ­¥è§£æå„ä¸ªç»„ä»¶å¦‚ä½•ååŒå®Œæˆä¸šåŠ¡ç›®æ ‡ã€‚

---

### æ­¥éª¤ 1ï¼šç”¨æˆ·å¯åŠ¨åº”ç”¨
**ç»„ä»¶è¿æ¥ï¼šUser â†’ Main Function**

#### Main Function èŒè´£
ä½œä¸ºç¨‹åºå…¥å£ç‚¹ï¼Œè´Ÿè´£ç¼–æ’æ•´ä¸ªç³»ç»Ÿçš„åˆå§‹åŒ–å’Œæ¼”ç¤ºæŸ¥è¯¢æµç¨‹ã€‚

#### è°ƒç”¨å…³ç³»
ç”¨æˆ·é€šè¿‡å‘½ä»¤è¡Œè¿è¡Œ `python employee_handbook_agent.py`ï¼Œå¯åŠ¨ Main Functionã€‚

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 341-410
def main():
    # åˆå§‹åŒ–é…ç½®
    PDF_PATH = "./jd-employee-handbook.pdf"
    VECTOR_DB_PATH = "./tmp/lancedb"
    
    # åˆ›å»º agent å®ä¾‹
    agent = EmployeeHandbookAgent(...)
    
    # åŠ è½½å¹¶ç´¢å¼• PDF
    agent.load_and_index_pdf(force_reload=True)
    
    # æ‰§è¡Œæ¼”ç¤ºæŸ¥è¯¢
    agent.ask("å…¬å¸çš„å¹´å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ", stream=True)
```

---

### æ­¥éª¤ 2ï¼šè·å– API å¯†é’¥
**ç»„ä»¶è¿æ¥ï¼šUser â†’ API Key Handler**

#### API Key Handler èŒè´£
å¤„ç†äº¤äº’å¼ API å¯†é’¥æ”¶é›†å’ŒéªŒè¯ï¼Œç¡®ä¿ç³»ç»Ÿæœ‰æƒé™è°ƒç”¨å¤–éƒ¨æœåŠ¡ã€‚

#### è°ƒç”¨å…³ç³»
å¦‚æœç¯å¢ƒå˜é‡ä¸­æ²¡æœ‰é…ç½® API Keyï¼Œç³»ç»Ÿä¼šæç¤ºç”¨æˆ·è¾“å…¥ DeepSeek API Keyï¼ˆç”¨äºè°ƒç”¨ LLMï¼‰ã€‚

#### å®ç°ç»†èŠ‚
- ä½¿ç”¨ `getpass` æ¨¡å—ä»¥æ˜Ÿå·å½¢å¼éšè—ç”¨æˆ·è¾“å…¥ï¼Œä¿æŠ¤æ•æ„Ÿä¿¡æ¯
- æä¾› API Key è·å–åœ°å€çš„å‹å¥½æç¤º
- éªŒè¯è¾“å…¥ä¸ä¸ºç©º

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 57-79
def get_api_key_interactive(key_name: str = "DEEPSEEK_API_KEY") -> str:
    print(f"\nğŸ”‘ è¯·è¾“å…¥ä½ çš„ {key_name}")
    if key_name == "DEEPSEEK_API_KEY":
        print("   è·å–åœ°å€: https://platform.deepseek.com/")
    
    api_key = getpass.getpass("   API Key (è¾“å…¥æ—¶ä¼šéšè—): ").strip()
    
    if not api_key:
        raise ValueError(f"âŒ {key_name} ä¸èƒ½ä¸ºç©º")
    
    return api_key
```

---

### æ­¥éª¤ 3ï¼šåˆå§‹åŒ–æ ¸å¿ƒä»£ç†
**ç»„ä»¶è¿æ¥ï¼šMain Function â†’ EmployeeHandbookAgent**

#### EmployeeHandbookAgent èŒè´£
ä½œä¸ºæ ¸å¿ƒ RAG ä»£ç†ç±»ï¼Œç®¡ç†å®Œæ•´çš„é—®ç­”æµæ°´çº¿ï¼ŒåŒ…æ‹¬ï¼š
- æ–‡æ¡£åŠ è½½ä¸å‘é‡åŒ–
- ç›¸ä¼¼åº¦æ£€ç´¢
- ç­”æ¡ˆç”Ÿæˆ

#### è°ƒç”¨å…³ç³»
Main Function åˆ›å»º `EmployeeHandbookAgent` å®ä¾‹ï¼Œä¼ å…¥é…ç½®å‚æ•°ã€‚

#### å…³é”®å‚æ•°
- `pdf_path`: "./jd-employee-handbook.pdf" - PDF æ–‡æ¡£è·¯å¾„
- `vector_db_path`: "./tmp/lancedb" - å‘é‡æ•°æ®åº“å­˜å‚¨è·¯å¾„
- `use_fastembed`: True - ä½¿ç”¨å…è´¹çš„æœ¬åœ°åµŒå…¥æ¨¡å‹
- `deepseek_api_key`: DeepSeek API å¯†é’¥
- `openai_api_key`: OpenAI API å¯†é’¥ï¼ˆå¯é€‰ï¼Œä»…åœ¨ä½¿ç”¨ OpenAI åµŒå…¥æ—¶éœ€è¦ï¼‰

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 82-131
class EmployeeHandbookAgent:
    def __init__(
        self,
        pdf_path: str,
        vector_db_path: str = "./tmp/lancedb",
        table_name: str = "employee_handbook",
        use_fastembed: bool = True,
        deepseek_api_key: Optional[str] = None,
        openai_api_key: Optional[str] = None,
    ):
        # åˆå§‹åŒ–å„ç§ç»„ä»¶
        self.embeddings = self._initialize_embeddings(use_fastembed)
        self.llm = self._initialize_llm()
        # ...
```

---

### æ­¥éª¤ 4ï¼šåˆå§‹åŒ–åµŒå…¥æ¨¡å‹
**ç»„ä»¶è¿æ¥ï¼šEmployeeHandbookAgent â†’ Embeddings Manager**

#### Embeddings Manager èŒè´£
åˆå§‹åŒ–å’Œç®¡ç†æ–‡æœ¬åµŒå…¥æ¨¡å‹ï¼Œå°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å€¼å‘é‡ç”¨äºè¯­ä¹‰æœç´¢ã€‚

#### è°ƒç”¨å…³ç³»
Agent åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ `_initialize_embeddings()` æ–¹æ³•ã€‚

#### æŠ€æœ¯é€‰å‹
1. **ä¼˜å…ˆæ–¹æ¡ˆ**ï¼šFastEmbed
   - âœ… å…è´¹
   - âœ… æœ¬åœ°è¿è¡Œ
   - âœ… æ— éœ€ API Key
   - âœ… æ”¯æŒä¸­è‹±æ–‡

2. **é™çº§æ–¹æ¡ˆ**ï¼šOpenAI Embeddings
   - âš ï¸ éœ€è¦ API Key
   - âš ï¸ è°ƒç”¨å¤–éƒ¨æœåŠ¡
   - âš ï¸ æœ‰è´¹ç”¨

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 132-147
def _initialize_embeddings(self, use_fastembed: bool):
    if use_fastembed and FASTEMBED_AVAILABLE:
        print("ğŸ”§ Initializing FastEmbed embeddings (free, local)...")
        return FastEmbedEmbeddings()  # ä½¿ç”¨é»˜è®¤æ¨¡å‹
    elif OPENAI_EMBEDDINGS_AVAILABLE and self.openai_api_key:
        print("ğŸ”§ Initializing OpenAI embeddings...")
        return OpenAIEmbeddings(openai_api_key=self.openai_api_key)
    else:
        raise ValueError("âŒ No embedding model available.")
```

---

### æ­¥éª¤ 5ï¼šåˆå§‹åŒ–å¤§è¯­è¨€æ¨¡å‹
**ç»„ä»¶è¿æ¥ï¼šEmployeeHandbookAgent â†’ LLM Manager**

#### LLM Manager èŒè´£
åˆå§‹åŒ–å’Œç®¡ç† DeepSeek Reasoner æ¨¡å‹ï¼Œè´Ÿè´£ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚

#### è°ƒç”¨å…³ç³»
Agent åœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨ `_initialize_llm()` æ–¹æ³•ã€‚

#### é…ç½®å‚æ•°
- **Model**: `deepseek-reasoner` - æ¨ç†èƒ½åŠ›å¼ºçš„æ¨¡å‹
- **Temperature**: 0 - ç¡®ä¿è¾“å‡ºç¡®å®šæ€§ï¼Œé€‚åˆäº‹å®æ€§é—®ç­”
- **Max tokens**: 4000 - å…è®¸ç”Ÿæˆè¯¦ç»†çš„ç­”æ¡ˆ
- **Base URL**: `https://api.deepseek.com/v1` - DeepSeek API ç«¯ç‚¹

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 149-158
def _initialize_llm(self):
    print("ğŸ”§ Initializing DeepSeek Reasoner model...")
    return ChatOpenAI(
        model="deepseek-reasoner",
        openai_api_key=self.deepseek_api_key,
        openai_api_base="https://api.deepseek.com/v1",
        temperature=0,  # æ›´ç¡®å®šçš„è¾“å‡º
        max_tokens=4000,
    )
```

---

### æ­¥éª¤ 6ï¼šåŠ è½½ PDF æ–‡æ¡£
**ç»„ä»¶è¿æ¥ï¼šEmployeeHandbookAgent â†’ PDF Loader**

#### PDF Loader èŒè´£
ä½¿ç”¨ LangChain çš„ PyPDFLoader åŠ è½½å’Œè§£æ PDF å‘˜å·¥æ‰‹å†Œæ–‡æ¡£ã€‚

#### è°ƒç”¨å…³ç³»
å½“è°ƒç”¨ `agent.load_and_index_pdf()` æ—¶ï¼Œå†…éƒ¨ä½¿ç”¨ PDF Loader è¯»å–æ–‡æ¡£ã€‚

#### è¾“å‡º
è¿”å›æ–‡æ¡£å¯¹è±¡åˆ—è¡¨ï¼ˆ`List[Document]`ï¼‰ï¼Œæ¯é¡µä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ Documentï¼ŒåŒ…å«ï¼š
- `page_content`: é¡µé¢æ–‡æœ¬å†…å®¹
- `metadata`: å…ƒæ•°æ®ï¼ˆå¦‚é¡µç ï¼‰

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 205-207
loader = PyPDFLoader(self.pdf_path)
documents = loader.load()
print(f"âœ… Loaded {len(documents)} pages from PDF")
```

---

### æ­¥éª¤ 7ï¼šè¯»å– PDF æ–‡ä»¶å†…å®¹
**ç»„ä»¶è¿æ¥ï¼šPDF Loader â†’ Employee Handbook PDF**

#### Employee Handbook PDF èŒè´£
æºæ–‡æ¡£æ–‡ä»¶ï¼ŒåŒ…å«å…¬å¸æ”¿ç­–ä¿¡æ¯ã€‚

#### è°ƒç”¨å…³ç³»
PDF Loader é€šè¿‡æ–‡ä»¶ I/O è¯»å– "jd-employee-handbook.pdf" æ–‡ä»¶å†…å®¹ã€‚

#### æ•°æ®æµ
```
åŸå§‹ PDF æ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶ï¼‰
    â†“
PDF Loader è§£æ
    â†“
æ–‡æœ¬å†…å®¹ï¼ˆæŒ‰é¡µæå–ï¼‰
```

---

### æ­¥éª¤ 8ï¼šåˆ†å‰²æ–‡æ¡£
**ç»„ä»¶è¿æ¥ï¼šEmployeeHandbookAgent â†’ Text Splitter**

#### Text Splitter èŒè´£
ä½¿ç”¨ RecursiveCharacterTextSplitter å°†é•¿æ–‡æ¡£åˆ‡åˆ†æˆè¾ƒå°çš„æ–‡æœ¬å—ï¼ˆchunksï¼‰ï¼ŒåŒæ—¶ä¿ç•™ä¸Šä¸‹æ–‡é‡å ã€‚

#### è°ƒç”¨å…³ç³»
Agent è°ƒç”¨ `text_splitter.split_documents(documents)` å¤„ç†æ–‡æ¡£ã€‚

#### åˆ†å‰²ç­–ç•¥
- **Chunk size**: 1500 å­—ç¬¦
  - è¾ƒå¤§çš„å—ä»¥ä¿æŒå®Œæ•´çš„æ”¿ç­–æ®µè½
  - é¿å…å°†ç›¸å…³ä¿¡æ¯æ‹†åˆ†åˆ°ä¸åŒå—
  
- **Chunk overlap**: 300 å­—ç¬¦
  - é‡å éƒ¨åˆ†ç¡®ä¿ä¸Šä¸‹æ–‡è¿ç»­æ€§
  - é¿å…åœ¨é‡è¦ä¿¡æ¯å¤„æˆªæ–­

- **åˆ†éš”ç¬¦ä¼˜å…ˆçº§**: `["\n\n", "\n", "ã€‚", "ï¼›", " ", ""]`
  - æ”¯æŒä¸­è‹±æ–‡åˆ†éš”
  - ä¼˜å…ˆåœ¨æ®µè½è¾¹ç•Œå¤„åˆ†å‰²

#### ä¸ºä»€ä¹ˆéœ€è¦åˆ†å‰²ï¼Ÿ
1. **LLM ä¸Šä¸‹æ–‡é™åˆ¶**ï¼šä¸èƒ½å°†æ•´ä¸ªæ–‡æ¡£ä½œä¸ºä¸Šä¸‹æ–‡
2. **æ£€ç´¢ç²¾åº¦**ï¼šè¾ƒå°çš„å—ä½¿å¾—ç›¸ä¼¼åº¦æœç´¢æ›´ç²¾ç¡®
3. **æˆæœ¬æ§åˆ¶**ï¼šå‡å°‘æ¯æ¬¡è°ƒç”¨ LLM æ—¶çš„ token æ•°é‡

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 211-219
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=1500,
    chunk_overlap=300,
    length_function=len,
    separators=["\n\n", "\n", "ã€‚", "ï¼›", " ", ""]
)
chunks = text_splitter.split_documents(documents)
print(f"âœ… Created {len(chunks)} text chunks")
```

---

### æ­¥éª¤ 9ï¼šåˆ›å»ºå‘é‡å­˜å‚¨
**ç»„ä»¶è¿æ¥ï¼šEmployeeHandbookAgent â†’ Vector Store**

#### Vector Store èŒè´£
ä½¿ç”¨ LanceDB å­˜å‚¨å’Œç®¡ç†æ–‡æ¡£åµŒå…¥å‘é‡ï¼Œæ”¯æŒé«˜æ•ˆçš„ç›¸ä¼¼åº¦æœç´¢ã€‚

#### è°ƒç”¨å…³ç³»
Agent è°ƒç”¨ `LanceDB.from_documents()` åˆ›å»ºå‘é‡å­˜å‚¨ã€‚

#### é…ç½®
- **Table name**: "employee_handbook" - è¡¨å
- **Top-k retrieval**: 20 - æ£€ç´¢æœ€ç›¸å…³çš„ 20 ä¸ªæ–‡æ¡£å—
- **Storage**: Local LanceDB - æœ¬åœ°å­˜å‚¨

#### LanceDB ä¼˜åŠ¿
- âœ… **æ— éœ€å®‰è£…æ•°æ®åº“**ï¼šåŸºäºæ–‡ä»¶çš„å­˜å‚¨
- âœ… **æ€§èƒ½ä¼˜å¼‚**ï¼šåŸºäº Apache Arrow å’Œ Lance æ ¼å¼
- âœ… **æŒä¹…åŒ–**ï¼šæ”¯æŒå¢é‡æ›´æ–°å’Œç‰ˆæœ¬æ§åˆ¶
- âœ… **ç®€å•æ˜“ç”¨**ï¼šAPI ç®€æ´ï¼Œæ˜“äºé›†æˆ

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 227-235
db = lancedb.connect(self.vector_db_path)

self.vector_store = LanceDB.from_documents(
    documents=chunks,
    embedding=self.embeddings,
    connection=db,
    table_name=self.table_name,
)
```

---

### æ­¥éª¤ 10ï¼šç”Ÿæˆæ–‡æ¡£å‘é‡
**ç»„ä»¶è¿æ¥ï¼šVector Store â†’ Embeddings Manager**

#### è°ƒç”¨å…³ç³»
Vector Store åœ¨åˆ›å»ºæ—¶ï¼Œè°ƒç”¨ Embeddings Manager ä¸ºæ¯ä¸ªæ–‡æœ¬å—ç”Ÿæˆå‘é‡è¡¨ç¤ºã€‚

#### å‘é‡åŒ–è¿‡ç¨‹
```
æ–‡æœ¬å— 1: "å‘˜å·¥å…¥èŒæ»¡ä¸€å¹´åï¼Œäº«æœ‰5å¤©å¸¦è–ªå¹´å‡..."
    â†“ FastEmbed æ¨¡å‹
    â†“
å‘é‡ 1: [0.023, -0.145, 0.892, ..., 0.234]  (768 ç»´)

æ–‡æœ¬å— 2: "ç—…å‡éœ€æå‰é€šçŸ¥ä¸»ç®¡..."
    â†“ FastEmbed æ¨¡å‹
    â†“
å‘é‡ 2: [0.156, 0.023, -0.456, ..., 0.678]  (768 ç»´)

... (æ‰¹é‡å¤„ç†æ‰€æœ‰æ–‡æœ¬å—)
```

#### æ‰¹å¤„ç†ä¼˜åŒ–
é€šå¸¸æ‰¹é‡å¤„ç†å¤šä¸ªæ–‡æœ¬å—ä»¥æé«˜æ•ˆç‡ï¼š
- å‡å°‘æ¨¡å‹è°ƒç”¨æ¬¡æ•°
- å……åˆ†åˆ©ç”¨ GPU/CPU å¹¶è¡Œè®¡ç®—
- æå‡æ•´ä½“å¤„ç†é€Ÿåº¦

---

### æ­¥éª¤ 11ï¼šæŒä¹…åŒ–å‘é‡
**ç»„ä»¶è¿æ¥ï¼šVector Store â†’ LanceDB Storage**

#### LanceDB Storage èŒè´£
æœ¬åœ°å‘é‡æ•°æ®åº“å­˜å‚¨ï¼Œä½äº `./tmp/lancedb` ç›®å½•ã€‚

#### è°ƒç”¨å…³ç³»
Vector Store é€šè¿‡æ–‡ä»¶ I/O å°†å‘é‡æ•°æ®æŒä¹…åŒ–åˆ°ç£ç›˜ã€‚

#### å­˜å‚¨ç»“æ„
```
./tmp/lancedb/
â””â”€â”€ employee_handbook.lance/
    â”œâ”€â”€ _transactions/        # äº‹åŠ¡æ—¥å¿—
    â”‚   â”œâ”€â”€ 0-xxx.txn
    â”‚   â””â”€â”€ 1-xxx.txn
    â”œâ”€â”€ _versions/           # ç‰ˆæœ¬ç®¡ç†
    â”‚   â”œâ”€â”€ 1.manifest
    â”‚   â””â”€â”€ 2.manifest
    â””â”€â”€ data/                # å‘é‡æ•°æ®
        â”œâ”€â”€ xxx.lance
        â””â”€â”€ yyy.lance
```

#### æŒä¹…åŒ–ä¼˜åŠ¿
- âœ… **å¢é‡æ›´æ–°**ï¼šä¸‹æ¬¡è¿è¡Œæ—¶å¯ä»¥ç›´æ¥åŠ è½½ï¼Œæ— éœ€é‡æ–°å¤„ç† PDF
- âœ… **ç‰ˆæœ¬æ§åˆ¶**ï¼šæ”¯æŒæ•°æ®ç‰ˆæœ¬ç®¡ç†
- âœ… **æœ¬åœ°å­˜å‚¨**ï¼šæ— éœ€å¤–éƒ¨æ•°æ®åº“æœåŠ¡
- âœ… **å¿«é€Ÿå¯åŠ¨**ï¼šè·³è¿‡å‘é‡åŒ–æ­¥éª¤ï¼Œå‡ ç§’å†…å°±ç»ª

---

### æ­¥éª¤ 12ï¼šè®¾ç½®æ£€ç´¢å™¨
**ç»„ä»¶è¿æ¥ï¼šEmployeeHandbookAgent â†’ Retriever**

#### Retriever èŒè´£
åŸºäºæŸ¥è¯¢çš„è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢æœ€ç›¸å…³çš„æ–‡æ¡£å—ã€‚

#### è°ƒç”¨å…³ç³»
Agent è°ƒç”¨ `vector_store.as_retriever()` åˆ›å»ºæ£€ç´¢å™¨ã€‚

#### æ£€ç´¢é…ç½®
- **Search type**: "similarity" - è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢
- **k=20** - è¿”å›å‰ 20 ä¸ªæœ€ç›¸å…³çš„æ–‡æ¡£å—
  - æ¯” agno çš„é»˜è®¤å€¼ (k=10) æ›´å¤§
  - æä¾›æ›´ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯

#### ä¸ºä»€ä¹ˆ k=20ï¼Ÿ
1. **è¦†ç›–æ›´å…¨é¢**ï¼šå‘˜å·¥æ‰‹å†Œæ”¿ç­–å¯èƒ½åˆ†æ•£åœ¨å¤šå¤„
2. **æé«˜å¬å›ç‡**ï¼šç¡®ä¿ä¸é—æ¼é‡è¦ä¿¡æ¯
3. **LLM å¤„ç†èƒ½åŠ›**ï¼šDeepSeek Reasoner èƒ½å¤„ç†è¾ƒé•¿ä¸Šä¸‹æ–‡

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 260-263
self.retriever = self.vector_store.as_retriever(
    search_type="similarity",
    search_kwargs={"k": 20}
)
```

---

### æ­¥éª¤ 13ï¼šæ„å»ºå’Œè°ƒç”¨ RAG é“¾
**ç»„ä»¶è¿æ¥ï¼šEmployeeHandbookAgent â†’ RAG Chain**

#### RAG Chain èŒè´£
ä½¿ç”¨ LangChain LCELï¼ˆLangChain Expression Languageï¼‰ç¼–æ’æ£€ç´¢ã€æç¤ºæ ¼å¼åŒ–å’Œ LLM ç”Ÿæˆçš„å®Œæ•´æµç¨‹ã€‚

#### è°ƒç”¨å…³ç³»
å½“ç”¨æˆ·æé—®"å…¬å¸çš„å¹´å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ"æ—¶ï¼ŒAgent è°ƒç”¨ `rag_chain.invoke(question)`ã€‚

#### æµæ°´çº¿ç»“æ„
```python
self.rag_chain = (
    {
        "context": self.retriever | format_docs,  # æ£€ç´¢å¹¶æ ¼å¼åŒ–æ–‡æ¡£
        "question": RunnablePassthrough()         # ä¼ é€’åŸå§‹é—®é¢˜
    }
    | prompt                                      # å¡«å……æç¤ºæ¨¡æ¿
    | self.llm                                    # LLM ç”Ÿæˆç­”æ¡ˆ
    | StrOutputParser()                           # è§£æè¾“å‡º
)
```

#### LCEL ä¼˜åŠ¿
- âœ… **å£°æ˜å¼**ï¼šæ¸…æ™°è¡¨è¾¾æ•°æ®æµ
- âœ… **å¯ç»„åˆ**ï¼šè½»æ¾ä¿®æ”¹å’Œæ‰©å±•
- âœ… **æµå¼æ”¯æŒ**ï¼šæ”¯æŒæµå¼è¾“å‡º
- âœ… **ç±»å‹å®‰å…¨**ï¼šç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥

#### ä»£ç ä½ç½®
```python
# employee_handbook_agent.py, line 265-303
template = """ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å‘˜å·¥æ‰‹å†Œé—®ç­”åŠ©æ‰‹...

å‘˜å·¥æ‰‹å†Œç›¸å…³å†…å®¹ï¼š
{context}

é—®é¢˜ï¼š{question}

å›ç­”ï¼ˆè¯·å…·ä½“è¯´æ˜å¹¶å¼•ç”¨æ¥æºï¼‰ï¼š"""

prompt = ChatPromptTemplate.from_template(template)

def format_docs(docs):
    formatted = []
    for doc in docs:
        page = doc.metadata.get('page', 'unknown')
        formatted.append(f"[Page {page + 1}]\n{doc.page_content}")
    return "\n\n".join(formatted)

self.rag_chain = (
    {"context": self.retriever | format_docs, "question": RunnablePassthrough()}
    | prompt | self.llm | StrOutputParser()
)
```

---

### æ­¥éª¤ 14ï¼šæ£€ç´¢ç›¸å…³æ–‡æ¡£å—
**ç»„ä»¶è¿æ¥ï¼šRAG Chain â†’ Retriever**

#### è°ƒç”¨å…³ç³»
RAG Chain è‡ªåŠ¨å°†ç”¨æˆ·é—®é¢˜"å…¬å¸çš„å¹´å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ"ä¼ é€’ç»™ Retrieverã€‚

#### æ£€ç´¢è¿‡ç¨‹
1. **é—®é¢˜å‘é‡åŒ–**ï¼šå°†é—®é¢˜æ–‡æœ¬è½¬æ¢ä¸ºå‘é‡
2. **ç›¸ä¼¼åº¦è®¡ç®—**ï¼šåœ¨å‘é‡æ•°æ®åº“ä¸­æœç´¢æœ€ç›¸ä¼¼çš„æ–‡æ¡£å—
3. **è¿”å›ç»“æœ**ï¼šè¿”å› top-20 ç›¸å…³æ–‡æ¡£å—

#### ç¤ºä¾‹æ£€ç´¢ç»“æœ
```python
[
    Document(
        page_content="å‘˜å·¥å…¥èŒæ»¡ä¸€å¹´åï¼Œäº«æœ‰5å¤©å¸¦è–ªå¹´å‡...",
        metadata={"page": 14, "source": "jd-employee-handbook.pdf"}
    ),
    Document(
        page_content="å¹´å‡å¯ä»¥è¿ç»­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åˆ†æ¬¡ä½¿ç”¨...",
        metadata={"page": 15, "source": "jd-employee-handbook.pdf"}
    ),
    # ... æ›´å¤šç›¸å…³æ–‡æ¡£å—
]
```

---

### æ­¥éª¤ 15ï¼šæŸ¥è¯¢å‘é‡æ•°æ®åº“
**ç»„ä»¶è¿æ¥ï¼šRetriever â†’ Vector Store**

#### è°ƒç”¨å…³ç³»
Retriever è°ƒç”¨ Vector Store çš„ `similarity_search()` æ–¹æ³•ã€‚

#### æœç´¢ç®—æ³•ï¼ˆk-NN è¿‘é‚»æœç´¢ï¼‰
1. **æŸ¥è¯¢å‘é‡åŒ–**
   ```
   é—®é¢˜: "å…¬å¸çš„å¹´å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ"
       â†“ Embeddings Manager
   æŸ¥è¯¢å‘é‡: [0.123, -0.456, 0.789, ..., 0.234]
   ```

2. **è®¡ç®—ç›¸ä¼¼åº¦**
   ```
   å¯¹äºæ•°æ®åº“ä¸­çš„æ¯ä¸ªå‘é‡ï¼š
   ç›¸ä¼¼åº¦ = cosine_similarity(æŸ¥è¯¢å‘é‡, æ–‡æ¡£å‘é‡)
   ```

3. **æ’åºå’Œè¿”å›**
   ```
   æŒ‰ç›¸ä¼¼åº¦é™åºæ’åº
       â†“
   è¿”å› top-20 ç»“æœ
   ```

#### LanceDB ç´¢å¼•ä¼˜åŒ–
- ä½¿ç”¨ HNSWï¼ˆHierarchical Navigable Small Worldï¼‰ç´¢å¼•
- è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ï¼ˆANNï¼‰
- åœ¨ç²¾åº¦å’Œé€Ÿåº¦ä¹‹é—´å–å¾—å¹³è¡¡

---

### æ­¥éª¤ 16ï¼šç”Ÿæˆæœ€ç»ˆç­”æ¡ˆ
**ç»„ä»¶è¿æ¥ï¼šRAG Chain â†’ LLM Manager**

#### è°ƒç”¨å…³ç³»
RAG Chain å°†æ ¼å¼åŒ–çš„æç¤ºï¼ˆåŒ…å«æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡å’Œç”¨æˆ·é—®é¢˜ï¼‰å‘é€ç»™ LLM Managerã€‚

#### æç¤ºç»“æ„ç¤ºä¾‹
```
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å‘˜å·¥æ‰‹å†Œé—®ç­”åŠ©æ‰‹ï¼ŒåŸºäºå‘˜å·¥æ‰‹å†Œå†…å®¹å›ç­”å…³äºå…¬å¸æ”¿ç­–çš„é—®é¢˜ã€‚

è¯·æ ¹æ®ä»¥ä¸‹å‘˜å·¥æ‰‹å†Œçš„ä¸Šä¸‹æ–‡æ¥å›ç­”é—®é¢˜ã€‚å¦‚æœåœ¨æä¾›çš„ä¸Šä¸‹æ–‡ä¸­æ‰¾ä¸åˆ°ç­”æ¡ˆï¼Œè¯·æ˜ç¡®è¯´æ˜ã€‚

å›ç­”æ—¶è¯·éµå¾ªä»¥ä¸‹è¦æ±‚ï¼š
1. ä½¿ç”¨ä¸­æ–‡å›ç­”
2. ç¡®ä¿ç­”æ¡ˆä¸å‘˜å·¥æ‰‹å†Œå†…å®¹ä¸€è‡´
3. å°½å¯èƒ½å¼•ç”¨æ¥æºé¡µç 
4. å›ç­”è¦å…·ä½“ã€å‡†ç¡®

å‘˜å·¥æ‰‹å†Œç›¸å…³å†…å®¹ï¼š
[Page 15]
å¹´å‡æ”¿ç­–ï¼šå‘˜å·¥å…¥èŒæ»¡ä¸€å¹´åï¼Œäº«æœ‰5å¤©å¸¦è–ªå¹´å‡ã€‚å…¥èŒæ»¡ä¸‰å¹´åï¼Œ
å¹´å‡å¢åŠ åˆ°10å¤©ã€‚å…¥èŒæ»¡äº”å¹´åï¼Œå¹´å‡å¢åŠ åˆ°15å¤©...

[Page 16]
å¹´å‡ä½¿ç”¨è§„å®šï¼šå¹´å‡å¯ä»¥è¿ç»­ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åˆ†æ¬¡ä½¿ç”¨ã€‚å‘˜å·¥éœ€è¦
æå‰è‡³å°‘ä¸€å‘¨å‘ä¸»ç®¡ç”³è¯·å¹´å‡...

... (æ›´å¤šç›¸å…³å†…å®¹)

é—®é¢˜ï¼šå…¬å¸çš„å¹´å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ

å›ç­”ï¼ˆè¯·å…·ä½“è¯´æ˜å¹¶å¼•ç”¨æ¥æºï¼‰ï¼š
```

#### RAG çš„ä¼˜åŠ¿
- âœ… **äº‹å®å‡†ç¡®**ï¼šåŸºäºå®é™…æ–‡æ¡£å†…å®¹ï¼Œå‡å°‘å¹»è§‰
- âœ… **å¯éªŒè¯**ï¼šæä¾›æ¥æºå¼•ç”¨ï¼Œç”¨æˆ·å¯æ ¸å®
- âœ… **ä¸Šä¸‹æ–‡ä¸°å¯Œ**ï¼š20 ä¸ªæ–‡æ¡£å—æä¾›å…¨é¢ä¿¡æ¯
- âœ… **ä¸­æ–‡å‹å¥½**ï¼šæç¤ºæ¨¡æ¿ä½¿ç”¨ä¸­æ–‡æŒ‡å¯¼

---

### æ­¥éª¤ 17ï¼šè°ƒç”¨å¤–éƒ¨ LLM API
**ç»„ä»¶è¿æ¥ï¼šLLM Manager â†’ DeepSeek API**

#### DeepSeek API èŒè´£
å¤–éƒ¨ LLM æœåŠ¡ï¼Œæä¾› deepseek-reasoner æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ã€‚

#### è°ƒç”¨å…³ç³»
LLM Manager é€šè¿‡ HTTPS/OpenAI SDK å‘é€è¯·æ±‚åˆ° `https://api.deepseek.com/v1`ã€‚

#### è¯·æ±‚å†…å®¹
```json
{
  "model": "deepseek-reasoner",
  "messages": [
    {
      "role": "user",
      "content": "<å®Œæ•´çš„æç¤ºï¼ŒåŒ…å«ä¸Šä¸‹æ–‡å’Œé—®é¢˜>"
    }
  ],
  "temperature": 0,
  "max_tokens": 4000
}
```

#### å“åº”å†…å®¹
```json
{
  "choices": [
    {
      "message": {
        "content": "æ ¹æ®å‘˜å·¥æ‰‹å†Œçš„å†…å®¹ï¼ˆç¬¬15-16é¡µï¼‰ï¼Œå…¬å¸çš„å¹´å‡æ”¿ç­–å¦‚ä¸‹ï¼š\n\n1. **åŸºæœ¬å¹´å‡å¤©æ•°**ï¼š\n   - å…¥èŒæ»¡ä¸€å¹´ï¼š5å¤©å¸¦è–ªå¹´å‡\n   - å…¥èŒæ»¡ä¸‰å¹´ï¼š10å¤©å¸¦è–ªå¹´å‡\n   - å…¥èŒæ»¡äº”å¹´ï¼š15å¤©å¸¦è–ªå¹´å‡\n\n2. **ä½¿ç”¨è§„å®š**ï¼š\n   - å¹´å‡å¯ä»¥è¿ç»­ä½¿ç”¨æˆ–åˆ†æ¬¡ä½¿ç”¨\n   - éœ€æå‰è‡³å°‘ä¸€å‘¨å‘ä¸»ç®¡ç”³è¯·\n   ...\n\næ¥æºï¼šå‘˜å·¥æ‰‹å†Œç¬¬15-16é¡µ"
      }
    }
  ]
}
```

#### DeepSeek Reasoner ç‰¹ç‚¹
- ğŸ§  **æ¨ç†èƒ½åŠ›å¼º**ï¼šæ“…é•¿ç†è§£å’Œç»¼åˆä¿¡æ¯
- ğŸ¯ **äº‹å®å‡†ç¡®**ï¼šåœ¨ RAG åœºæ™¯ä¸‹è¡¨ç°ä¼˜å¼‚
- ğŸ’° **æ€§ä»·æ¯”é«˜**ï¼šç›¸æ¯” GPT-4 æ›´ç»æµ
- ğŸ‡¨ğŸ‡³ **ä¸­æ–‡å‹å¥½**ï¼šå¯¹ä¸­æ–‡ç†è§£å’Œç”Ÿæˆèƒ½åŠ›å¼º

---

## ğŸ” ä¸‰ã€æ•°æ®æµæ€»ç»“

### 3.1 åˆå§‹åŒ–é˜¶æ®µï¼ˆæ­¥éª¤ 1-12ï¼‰

```
ç”¨æˆ·å¯åŠ¨åº”ç”¨
    â†“
è¾“å…¥ API Key
    â†“
åˆ›å»º Agent å®ä¾‹
    â†“
åˆå§‹åŒ– Embeddings Manager (FastEmbed)
    â†“
åˆå§‹åŒ– LLM Manager (DeepSeek)
    â†“
PDF Loader è¯»å–æ–‡ä»¶ â†’ "jd-employee-handbook.pdf"
    â†“
Text Splitter åˆ†å‰²æ–‡æ¡£ â†’ ç”Ÿæˆæ–‡æœ¬å—
    â†“
Vector Store åˆ›å»ºå‘é‡å­˜å‚¨
    â”œâ†’ Embeddings Manager ç”Ÿæˆå‘é‡
    â””â†’ LanceDB Storage æŒä¹…åŒ–å‘é‡
    â†“
åˆ›å»º Retriever (k=20)
    â†“
æ„å»º RAG Chain (LCEL)
    â†“
ç³»ç»Ÿå°±ç»ª âœ…
```

### 3.2 æŸ¥è¯¢é˜¶æ®µï¼ˆæ­¥éª¤ 13-17ï¼‰

```
ç”¨æˆ·æé—®: "å…¬å¸çš„å¹´å‡æ”¿ç­–æ˜¯ä»€ä¹ˆï¼Ÿ"
    â†“
RAG Chain å¼€å§‹å¤„ç†
    â†“
Retriever æ£€ç´¢ç›¸å…³æ–‡æ¡£
    â†“
Vector Store æ‰§è¡Œç›¸ä¼¼åº¦æœç´¢
    â”œâ†’ å°†é—®é¢˜å‘é‡åŒ–
    â”œâ†’ k-NN æœç´¢ (k=20)
    â””â†’ è¿”å› top-20 æ–‡æ¡£å—
    â†“
format_docs() æ ¼å¼åŒ–æ–‡æ¡£
    â”œâ†’ æ·»åŠ é¡µç æ ‡æ³¨ [Page X]
    â””â†’ æ‹¼æ¥æ‰€æœ‰æ–‡æ¡£å—
    â†“
å¡«å……æç¤ºæ¨¡æ¿
    â”œâ†’ context: æ ¼å¼åŒ–åçš„æ–‡æ¡£
    â””â†’ question: åŸå§‹é—®é¢˜
    â†“
LLM Manager è°ƒç”¨ DeepSeek API
    â”œâ†’ å‘é€å®Œæ•´æç¤º
    â””â†’ æ¥æ”¶ç”Ÿæˆçš„ç­”æ¡ˆ
    â†“
StrOutputParser è§£æè¾“å‡º
    â†“
è¿”å›ç­”æ¡ˆç»™ç”¨æˆ· (åŒ…å«æ¥æºé¡µç ) âœ…
```

---

## ğŸ¯ å››ã€æ¶æ„ä¼˜åŠ¿åˆ†æ

### 4.1 æœ¬åœ°ä¼˜å…ˆ (Local-First)
- âœ… **FastEmbed**ï¼šæœ¬åœ°åµŒå…¥æ¨¡å‹ï¼Œå…è´¹ä¸”æ— éœ€ API Key
- âœ… **LanceDB**ï¼šæœ¬åœ°å‘é‡æ•°æ®åº“ï¼Œæ— éœ€å®‰è£…å¤–éƒ¨æœåŠ¡
- âœ… **æŒä¹…åŒ–**ï¼šå‘é‡æ•°æ®æœ¬åœ°å­˜å‚¨ï¼ŒåŠ é€Ÿåç»­å¯åŠ¨

**å¥½å¤„**ï¼šé™ä½æˆæœ¬ã€æé«˜éšç§ã€å‡å°‘ç½‘ç»œä¾èµ–

### 4.2 å¯å¤ç°æ€§ (Reproducibility)
- âœ… **Temperature=0**ï¼šç¡®ä¿ç›¸åŒé—®é¢˜å¾—åˆ°ä¸€è‡´ç­”æ¡ˆ
- âœ… **å›ºå®šé…ç½®**ï¼šchunk_sizeã€overlapã€k å€¼ç­‰å‚æ•°å›ºå®š
- âœ… **ç‰ˆæœ¬æ§åˆ¶**ï¼šLanceDB æ”¯æŒå‘é‡æ•°æ®ç‰ˆæœ¬ç®¡ç†

**å¥½å¤„**ï¼šä¾¿äºè°ƒè¯•ã€æµ‹è¯•å’Œè´¨é‡ä¿è¯

### 4.3 å¯è¿½æº¯æ€§ (Traceability)
- âœ… **æ¥æºå¼•ç”¨**ï¼šç­”æ¡ˆåŒ…å«æ¥æºé¡µç  `[Page X]`
- âœ… **æ–‡æ¡£å±•ç¤º**ï¼šå¯æŸ¥çœ‹æ£€ç´¢åˆ°çš„åŸå§‹æ–‡æ¡£å—
- âœ… **é€æ˜æµç¨‹**ï¼šå®Œæ•´çš„æ•°æ®æµå’Œè°ƒç”¨é“¾

**å¥½å¤„**ï¼šç”¨æˆ·å¯éªŒè¯ä¿¡æ¯å‡†ç¡®æ€§ï¼Œå¢å¼ºä¿¡ä»»åº¦

### 4.4 å¯æ‰©å±•æ€§ (Scalability)
- âœ… **LCEL æ¶æ„**ï¼šå£°æ˜å¼æµæ°´çº¿ï¼Œæ˜“äºä¿®æ”¹
- âœ… **æ¨¡å—åŒ–è®¾è®¡**ï¼šå„ç»„ä»¶èŒè´£æ¸…æ™°ï¼Œæ¾è€¦åˆ
- âœ… **çµæ´»é…ç½®**ï¼šæ”¯æŒå¤šç§ embedding å’Œ LLM é€‰æ‹©

**å¥½å¤„**ï¼šä¾¿äºæ·»åŠ æ–°åŠŸèƒ½ã€ä¼˜åŒ–æ€§èƒ½ã€é€‚åº”éœ€æ±‚å˜åŒ–

### 4.5 æ€§èƒ½ä¼˜åŒ–
- âœ… **æ‰¹é‡å¤„ç†**ï¼šå‘é‡åŒ–å’Œæ£€ç´¢æ”¯æŒæ‰¹å¤„ç†
- âœ… **å¢é‡æ›´æ–°**ï¼šLanceDB æ”¯æŒå¢é‡æ·»åŠ æ–‡æ¡£
- âœ… **æµå¼è¾“å‡º**ï¼šæ”¯æŒæµå¼ç”Ÿæˆï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒ

**å¥½å¤„**ï¼šæé«˜å¤„ç†é€Ÿåº¦ã€é™ä½å»¶è¿Ÿã€ä¼˜åŒ–èµ„æºä½¿ç”¨

### 4.6 ä¸­æ–‡å‹å¥½
- âœ… **ä¸­æ–‡åˆ†éš”ç¬¦**ï¼š`["ã€‚", "ï¼›"]` ç­‰
- âœ… **ä¸­æ–‡æç¤º**ï¼šæç¤ºæ¨¡æ¿ä½¿ç”¨ä¸­æ–‡
- âœ… **ä¸­æ–‡æ¨¡å‹**ï¼šDeepSeek å¯¹ä¸­æ–‡æ”¯æŒä¼˜å¼‚

**å¥½å¤„**ï¼šæ›´å¥½åœ°å¤„ç†ä¸­æ–‡å‘˜å·¥æ‰‹å†Œï¼Œæé«˜ç­”æ¡ˆè´¨é‡

---

## ğŸ“ äº”ã€å…³é”®é…ç½®å‚æ•°

### 5.1 æ–‡æœ¬åˆ†å‰²å‚æ•°
```python
chunk_size = 1500        # è¾ƒå¤§çš„å—ä¿æŒå®Œæ•´æ”¿ç­–æ®µè½
chunk_overlap = 300      # é‡å ç¡®ä¿ä¸Šä¸‹æ–‡è¿ç»­æ€§
separators = ["\n\n", "\n", "ã€‚", "ï¼›", " ", ""]  # ä¸­è‹±æ–‡åˆ†éš”ç¬¦
```

### 5.2 æ£€ç´¢å‚æ•°
```python
search_type = "similarity"  # è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢
k = 20                      # æ£€ç´¢ top-20 æ–‡æ¡£å—ï¼ˆæ¯” agno æ›´å¤šï¼‰
```

### 5.3 LLM å‚æ•°
```python
model = "deepseek-reasoner"
temperature = 0             # ç¡®å®šæ€§è¾“å‡º
max_tokens = 4000          # æ”¯æŒè¯¦ç»†ç­”æ¡ˆ
base_url = "https://api.deepseek.com/v1"
```

### 5.4 åµŒå…¥æ¨¡å‹
```python
# FastEmbed (default)
FastEmbedEmbeddings()      # ä½¿ç”¨é»˜è®¤æ¨¡å‹ï¼Œæ”¯æŒä¸­è‹±æ–‡

# OpenAI (fallback)
OpenAIEmbeddings(openai_api_key=...)
```

---

## ğŸš€ å…­ã€æ€§èƒ½è€ƒè™‘

### 6.1 åˆæ¬¡è¿è¡Œ
```
PDF åŠ è½½           : ~2 ç§’
æ–‡æœ¬åˆ†å‰²           : ~1 ç§’
å‘é‡åŒ– (FastEmbed) : ~10-30 ç§’ (å–å†³äºæ–‡æ¡£å¤§å°)
æŒä¹…åŒ–å­˜å‚¨         : ~2 ç§’
-----------------------------------------
æ€»è®¡               : ~15-35 ç§’
```

### 6.2 åç»­è¿è¡Œï¼ˆå‘é‡å·²ç¼“å­˜ï¼‰
```
åŠ è½½å‘é‡å­˜å‚¨       : ~2 ç§’
æ£€ç´¢ + LLM ç”Ÿæˆ    : ~5-10 ç§’
-----------------------------------------
æ€»è®¡               : ~7-12 ç§’
```

### 6.3 ä¼˜åŒ–å»ºè®®
1. **é¦–æ¬¡è¿è¡Œåä¿ç•™å‘é‡**ï¼šè®¾ç½® `force_reload=False`
2. **è°ƒæ•´ k å€¼**ï¼šæ ¹æ®æ–‡æ¡£å¤æ‚åº¦è°ƒæ•´æ£€ç´¢æ•°é‡
3. **ä½¿ç”¨æµå¼è¾“å‡º**ï¼šæ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œæ›´å¿«çœ‹åˆ°ç»“æœ
4. **æ‰¹é‡æŸ¥è¯¢**ï¼šå¦‚éœ€å¤„ç†å¤šä¸ªé—®é¢˜ï¼Œå¯æ‰¹é‡æ£€ç´¢

---

## ğŸ“š ä¸ƒã€å‚è€ƒèµ„æº

### 7.1 ç›¸å…³æ–‡ä»¶
- `c4-model-component-2025-11-19--12-02.puml` - C4 ç»„ä»¶å›¾æºæ–‡ä»¶
- `employee_handbook_agent.py` - ä¸»ç¨‹åºå®ç°
- `jd-employee-handbook.pdf` - å‘˜å·¥æ‰‹å†Œæºæ–‡æ¡£

### 7.2 æŠ€æœ¯æ–‡æ¡£
- [LangChain æ–‡æ¡£](https://python.langchain.com/)
- [LanceDB æ–‡æ¡£](https://lancedb.github.io/lancedb/)
- [FastEmbed](https://github.com/qdrant/fastembed)
- [DeepSeek API](https://platform.deepseek.com/)

### 7.3 ç›¸å…³æ¦‚å¿µ
- **RAG (Retrieval-Augmented Generation)**: æ£€ç´¢å¢å¼ºç”Ÿæˆ
- **LCEL (LangChain Expression Language)**: LangChain è¡¨è¾¾å¼è¯­è¨€
- **k-NN (k-Nearest Neighbors)**: k è¿‘é‚»ç®—æ³•
- **Embeddings**: æ–‡æœ¬åµŒå…¥/å‘é‡è¡¨ç¤º
- **Vector Store**: å‘é‡æ•°æ®åº“/å‘é‡å­˜å‚¨

---

## ğŸ“ å…«ã€æ€»ç»“

æœ¬é¡¹ç›®é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„ç»„ä»¶æ¶æ„ï¼Œå®ç°äº†ä¸€ä¸ªé«˜æ•ˆã€å¯é çš„å‘˜å·¥æ‰‹å†Œé—®ç­”ç³»ç»Ÿã€‚å…³é”®è¦ç‚¹ï¼š

1. **æ¸…æ™°çš„èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªç»„ä»¶èŒè´£æ˜ç¡®ï¼Œæ˜“äºç»´æŠ¤
2. **ä¼˜é›…çš„æ•°æ®æµ**ï¼šä» PDF åˆ°ç­”æ¡ˆçš„å®Œæ•´æµæ°´çº¿
3. **å®ç”¨çš„æŠ€æœ¯é€‰å‹**ï¼šæœ¬åœ°ä¼˜å…ˆ + å¤–éƒ¨ LLM çš„æ··åˆæ¶æ„
4. **å‡ºè‰²çš„ç”¨æˆ·ä½“éªŒ**ï¼šå¿«é€Ÿå“åº” + æ¥æºå¼•ç”¨

è¿™ä¸ªæ¶æ„ä¸ä»…é€‚ç”¨äºå‘˜å·¥æ‰‹å†Œï¼Œä¹Ÿå¯ä»¥è½»æ¾æ‰©å±•åˆ°å…¶ä»–æ–‡æ¡£é—®ç­”åœºæ™¯ï¼Œå¦‚ï¼š
- äº§å“è¯´æ˜ä¹¦é—®ç­”
- æ³•å¾‹æ–‡æ¡£åˆ†æ
- æŠ€æœ¯æ–‡æ¡£æœç´¢
- çŸ¥è¯†åº“ç®¡ç†

é€šè¿‡ç†è§£è¿™ 17 ä¸ªæ­¥éª¤çš„ååŒå·¥ä½œï¼Œæ‚¨å¯ä»¥æ·±å…¥æŒæ¡ RAG ç³»ç»Ÿçš„æ ¸å¿ƒåŸç†ï¼Œå¹¶æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œå®šåˆ¶å’Œä¼˜åŒ–ã€‚

---

*æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š2025-11-19*  
*å¯¹åº” C4 å›¾ç‰ˆæœ¬ï¼šc4-model-component-2025-11-19--12-02.puml*

